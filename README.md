# Code Critic

This is a very simple implementation of Javascript code quality analysis. Code critic uses various open source libraries to find vulnerabilities in code and reports then to the user.

* [Getting Sarted](#getting-started)
    * [Dependencies](#dependencies)
    *  [Setting up the app](#setting-up-the-app)
    *  [Running the tests](#running-the-tests)
    *  [Starting the website](#starting-the-website)
* [Libaries used](#libaries-used)
* [How it works](#understanding-the-application)
    *  [What is an issue?](#what-is-an-issue)
    *  [Scoring](#scoring)
    *  [Configuring Thresholds](#configuring-thresholds)
* [Contributing to CodeCritic](#submission-guidelines)
* [License](#license)

## Getting Started
### Dependencies

1. NodeJS 10.0+
2. Ruby 2.0+
3. NPM 1.4+

### Setting up the app
Run the following:

```
bundle install
npm install
```

### Running the tests

```
npm test
```

### Starting the website

```
npm start
```

The application will be available at http://localhost:3000/


## Libaries used:

1. [JSHint](http://jshint.com): JSHint reviews the code for styling and common problems.
2. [ScanJS](https://github.com/mozilla/scanjs): A Security scanner that reviews the code for major vulnerabilities.
3. [David](https://github.com/alanshaw/david): Checks each dependency in package.json and validates whether there is a newer version available.
4. [Complexity-Report](https://www.npmjs.com/package/complexity-report): Generates a complex mathematical analysis of the source code trying to identify the maintainability effort.
5. [Flay-JS](https://github.com/UncleGene/flay-js): Reviews the code for structural similarities and copy pasted snippets and helps keep the code DRY.

In addition to code quality analysis, there are various open source libraries that are used here for software development. Please refer to the same in `package.json`.

Finally, we use [SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/) to display source code on the UI.

## Understanding the application

CodeCritic provides a very opinionated point of view of writing JavaScript code. 

### What is an issue
Any feedback generated by running one of the [above code quality checks](#libaries-used) is assumed to be an issue.

### Scoring
Code Critic uses a simple algorithm for rating files and generating a roll up score for each code base.

Total # of Issues in the file | Rating 
-------------------------------| ------------
 > 10 | 1 
 > 5 && <= 10 | 2 
 > 2 && <= 5 | 3 
 > 0 && <= 2 | 4 
 0 | 5 

Once all files have been rated, all ratings are added and divided by the total number of files to get a total score.

### Configuring Thresholds

The application uses preconfigured rules for JSHint and Complexity analysis and the same can be found under `./config/`. Please note that these rules are only indicative and you should feel free to change any if you do not agree with them.

The `./config/` directory has 2 types of files:

1. config files for thresholds.
2. ignore files for the file patterns that should be excluded from analysis.


## Submission Guidelines

### Submitting an Issue
Before you submit an issue, search the archive, maybe your question was already answered.

If your issue appears to be a bug, and hasn't been reported, open a new issue.
Help us to maximize the effort we can spend fixing issues and adding new
features, by not reporting duplicate issues.  Providing the following information will increase the
chances of your issue being dealt with quickly:

* **Overview of the Issue** - if an error is being thrown a non-minified stack trace helps
* **Motivation for or Use Case** - explain why this is a bug for you
* **Browsers and Operating System** - is this a problem with all browsers?
* **Reproduce the Error** - provide a live example or a unambiguous set of steps.
* **Related Issues** - has a similar issue been reported before?
* **Suggest a Fix** - if you can't fix the bug yourself, perhaps you can point to what might be
  causing the problem (line of code or commit)

### Submitting a Pull Request (PR)
Before you submit your Pull Request (PR) consider the following guidelines:

* Search github for an open or closed PR that relates to your submission. You don't want to duplicate effort.
* Make your changes in a new git branch:

     ```
     git checkout -b my-fix-branch master
     ```

* Create your patch, **including appropriate test cases**.
* Run the full test suite, `npm test`, and ensure that all tests pass.
* Commit your changes using a descriptive commit message.

     ```shell
     git commit -a
     ```
  Note: the optional commit `-a` command line option will automatically "add" and "rm" edited files.

* Push your branch to GitHub:

    ```shell
    git push origin my-fix-branch
    ```

* In GitHub, send a pull request to `master`.
* If we suggest changes then:
  * Make the required updates.
  * Re-run the test suite to ensure tests are still passing.
  * Rebase your branch and force push to your GitHub repository (this will update your Pull Request):

    ```shell
    git rebase master -i
    git push -f
    ```

That's it! Thank you for your contribution!

#### After your pull request is merged

After your pull request is merged, you can safely delete your branch and pull the changes
from the main (upstream) repository:

* Delete the remote branch on GitHub either through the GitHub web UI or your local shell as follows:

    ```shell
    git push origin --delete my-fix-branch
    ```

* Check out the master branch:

    ```shell
    git checkout master -f
    ```

* Delete the local branch:

    ```shell
    git branch -D my-fix-branch
    ```

* Update your master with the latest upstream version:

    ```shell
    git pull --ff upstream master
    ```

## License
The tool is available under MIT License. Please review the `LICENSE` file under the repository.
